{"version":3,"sources":["../src/contexts/ThemeContext.js","../src/components/ErrorBoundary.js","../src/components/Carousel.js","../src/components/Modal.js","../src/pages/Details.js","../src/hooks/useBreedList.js","../src/components/Pet.js","../src/components/Results.js","../src/components/SearchParams.js","../src/pages/App.js","index.js"],"names":["ThemeContext","ErrorBoundary","Component","hasError","redirect","getDerivedStateFromError","componentDidCatch","err","info","console","error","setTimeout","setState","render","state","props","children","Carousel","active","e","parseInt","target","dataset","index","images","map","img","i","handleClick","Modal","modalRoot","elRef","document","getElementById","current","createElement","appendChild","removeChild","_Details","Details","loading","showModal","window","location","componentDidMount","res","fetch","match","params","id","data","json","Object","assign","pets","animal","breed","city","description","name","theme","backgroundColor","toggleModal","adopt","DetailsWithRouter","useBreedList","localCache","breedList","setBreedList","status","setStatus","requestBreedList","breeds","Pet","hero","length","Results","pet","SearchParams","animals","setTheme","setLocation","setAnimal","setBreed","setPets","requestPets","updateLocation","updateAnimal","value","updateBreed","updateTheme","preventDefault","App","PORT","process","env","port","html","fs","readFileSync","toString","parts","split","server","use","express","static","req","write","staticContext","reactMarkup","url","stream","pipe","end","on","log","listen"],"mappings":"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","file":"index.js","sourceRoot":"../server","sourcesContent":["import { createContext, CreateContext } from 'react'\n\n\nconst ThemeContext = createContext(['green', () => {}])\n\n\nexport default ThemeContext\n","\nimport { Component } from 'react'\nimport { Link, Redirect } from 'react-router-dom'\n\n\nclass ErrorBoundary extends Component {\n  state = {\n    hasError : false,\n    redirect: false\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true }\n  }\n\n  componentDidCatch(err, info) {\n    console.error(\"ErrorBoundary caught an error: \", err, info)\n\n    setTimeout(() => {\n      this.setState({ redirect: true })\n    }, 5000);\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to=\"/\" />\n    }\n\n    if (this.state.hasError) {\n      return (\n        <h2>An error occured. <Link to=\"/\">Go back to the home page</Link> or wait five seconds.</h2>\n      )\n    }\n\n    return this.props.children\n  }\n}\n\n\nexport default ErrorBoundary\n","import { Component } from 'react'\n\n\nclass Carousel extends Component {\n  state = {\n    active: 0\n  }\n\n  static defaultProps = {\n    images: ['http://pets-images.dev-apis.com/pets/none.jpg']\n  }\n\n  handleClick = (e) => {\n    this.setState({\n      active: parseInt(e.target.dataset.index)\n    })\n  }\n\n  render() {\n    const { active } = this.state\n    const { images } = this.props\n\n    return (\n      <div className=\"carousel\">\n        <img src={images[active]} alt=\"animal\" />\n\n        <div className=\"carousel-smaller\">\n          {images.map((img, i) => (\n            <img\n              key={img}\n              src={img}\n              data-index={i}\n              onClick={this.handleClick}\n              className={i === active ? 'active' : ''}\n              alt=\"animal thumbnail\"\n            />\n          ))}\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default Carousel\n","import { useEffect, useRef } from 'react'\nimport { createPortal } from 'react-dom'\n\n\nlet modalRoot\n\n\nconst Modal = ({ children }) => {\n  const elRef = useRef(null)\n  modalRoot = modalRoot ? modalRoot : document.getElementById('modal')\n\n  if (!elRef.current) {\n    elRef.current = document.createElement('div')\n  }\n\n  useEffect(() => {\n    modalRoot.appendChild(elRef.current)\n\n    return () => modalRoot.removeChild(elRef.current)\n  }, [])\n\n  return createPortal(<div>{children}</div>, elRef.current);\n}\n\n\nexport default Modal\n","import { Component } from 'react'\nimport { withRouter } from 'react-router-dom'\nimport ThemeContext from '../contexts/ThemeContext'\nimport ErrorBoundary from '../components/ErrorBoundary'\nimport Carousel from '../components/Carousel'\nimport Modal from '../components/Modal'\n\nclass Details extends Component {\n  state = {\n    loading: true,\n    showModal: false\n  }\n\n  async componentDidMount() {\n    const res = await fetch(`http://pets-v2.dev-apis.com/pets?id=${this.props.match.params.id}`)\n    const data = await res.json()\n\n    this.setState(\n      Object.assign(\n        { loading: false },\n        data.pets[0]\n      )\n    )\n  }\n\n  toggleModal = () => this.setState({ showModal: !this.state.showModal })\n  adopt = () => window.location = 'http://bit.ly/pet-adopt'\n\n  render() {\n    const { animal, breed, city, state, images, description, name, showModal } = this.state\n\n    if (this.state.loading) {\n      return <h2>Loading...</h2>\n    }\n\n    return (\n      <div className=\"details\">\n        <Carousel images={images} />\n\n        <div>\n          <h1>{name}</h1>\n          <h2>{animal} - {breed} - {city}, {state}</h2>\n          <p>{description}</p>\n\n          <ThemeContext.Consumer>\n            {([theme]) => (\n              <button\n                style={{ backgroundColor: theme }}\n                onClick={this.toggleModal}\n              >\n                Adopt {name}\n              </button>\n            )}\n          </ThemeContext.Consumer>\n\n          { showModal ? (\n            <Modal>\n              <div>\n                <h1>Would you like to adopt {name}?</h1>\n                <div className=\"buttons\">\n                  <button onClick={this.adopt}>Yes</button>\n                  <button onClick={this.toggleModal}>No</button>\n                </div>\n              </div>\n            </Modal>\n          ) : null }\n        </div>\n      </div>\n    )\n  }\n}\n\n\nconst DetailsWithRouter = withRouter(Details)\n\nconst _Details = () => {\n  return (\n    <ErrorBoundary>\n      <DetailsWithRouter />\n    </ErrorBoundary>\n  )\n}\n\n\nexport default _Details\n","import { useState, useEffect } from 'react'\n\n\nconst localCache = {}\n\n\nfunction useBreedList(animal) {\n  const [breedList, setBreedList] = useState([])\n  const [status, setStatus] = useState('unloaded')\n\n  useEffect(() => {\n    if (!animal) {\n      setBreedList([])\n    } else if (localCache[animal]) {\n      setBreedList(localCache[animal])\n    } else {\n      requestBreedList()\n    }\n  }, [animal])\n\n  async function requestBreedList() {\n    setBreedList([])\n    setStatus('loading')\n\n    const res = await fetch(`http://pets-v2.dev-apis.com/breeds?animal=${animal}`)\n    const data = await res.json()\n\n    localCache[animal] = data.breeds || []\n    setBreedList(localCache[animal])\n    setStatus('loaded')\n  }\n\n  return [breedList, status]\n}\n\n\nexport default useBreedList\n","import { Link } from 'react-router-dom'\n\n\nconst Pet = ({ name, animal, breed, images, location, id }) => {\n  let hero = 'http://pets-images.dev-apis.com/pets/none.jpg'\n\n  if (images.length) {\n    hero = images[0]\n  }\n\n  return (\n    <Link to={`/details/${id}`} className=\"pet\">\n      <div className=\"image-container\">\n        <img src={hero} alt={name} />\n      </div>\n      <div className=\"info\">\n        <h1>{name}</h1>\n        <h2>{animal} - {breed} - {location}</h2>\n      </div>\n    </Link>\n  )\n}\n\nexport default Pet\n","import Pet from './Pet'\n\n\nfunction Results({ pets }) {\n  return (\n    <div className=\"search\">\n      {!pets.length ? (\n        <h2>No pets found</h2>\n      ) : (\n        pets.map(pet => (\n          <Pet\n            key={pet.id}\n            name={pet.name}\n            animal={pet.animal}\n            breed={pet.breed}\n            images={pet.images}\n            location={`${pet.city}, ${pet.state}`}\n            id={pet.id}\n          />\n        ))\n      )}\n    </div>\n  )\n}\n\n\nexport default Results\n","import { useState, useEffect, useContext } from 'react'\nimport ThemeContext from '../contexts/ThemeContext'\nimport useBreedList from '../hooks/useBreedList'\nimport Results from './Results'\n\n\nconst animals = ['bird', 'cat', 'dog', 'rabbit', 'reptile']\n\n\nconst SearchParams = () => {\n  const [theme, setTheme] = useContext(ThemeContext)\n  const [location, setLocation] = useState('')\n  const [animal, setAnimal] = useState('')\n  const [breed, setBreed] = useState('')\n  const [pets, setPets] = useState([])\n  const [breeds] = useBreedList(animal)\n\n  useEffect(() => {\n    requestPets()\n  }, [])\n\n  async function requestPets() {\n    const res = await fetch(`http://pets-v2.dev-apis.com/pets?animal=${animal}&location=${location}&breed=${breed}`)\n    const data = await res.json()\n\n    setPets(data.pets)\n  }\n\n  const updateLocation = e => setLocation(e.target.value)\n  const updateAnimal = e => setAnimal(e.target.value)\n  const updateBreed = e => setBreed(e.target.value)\n  const updateTheme = e => setTheme(e.target.value)\n\n  const submitForm = e => {\n    e.preventDefault()\n    requestPets()\n  }\n\n  return (\n    <div className=\"search-params\">\n      <form onSubmit={submitForm}>\n        <label htmlFor=\"location\">\n          Location\n          <input\n            id=\"location\"\n            placeholder=\"location\"\n            value={location}\n            onChange={updateLocation} />\n        </label>\n\n        <label htmlFor=\"animal\">\n          Animal\n          <select\n            id=\"animal\"\n            value={animal}\n            onChange={updateAnimal}\n            onBlur={updateAnimal}\n          >\n            <option />\n            {\n              animals.map(animal => (\n                <option value={animal} key={animal}>\n                  {animal}\n                </option>\n              ))\n            }\n          </select>\n        </label>\n\n        <label htmlFor=\"breed\">\n          Breed\n          <select\n            id=\"breed\"\n            value={breed}\n            onChange={updateBreed}\n            onBlur={updateBreed}\n          >\n            <option />\n            {\n              breeds.map(breed => (\n                <option value={breed} key={breed}>\n                  {breed}\n                </option>\n              ))\n            }\n          </select>\n        </label>\n\n        <label htmlFor=\"theme\">\n          Theme\n          <select\n            value={theme}\n            id=\"theme\"\n            onChange={updateTheme}\n            onBlur={updateTheme}\n          >\n            <option />\n            <option value=\"red\">red</option>\n            <option value=\"pink\">pink</option>\n            <option value=\"green\">green</option>\n            <option value=\"orange\">orange</option>\n          </select>\n        </label>\n\n        <button style={{ backgroundColor: theme }}>Submit</button>\n      </form>\n\n      <Results pets={pets} />\n    </div>\n  )\n}\n\n\nexport default SearchParams\n","import { StrictMode, useState } from 'react'\nimport { Route, Switch, Link } from 'react-router-dom'\nimport ThemeContext from '../contexts/ThemeContext'\nimport Details from './Details'\nimport SearchParams from '../components/SearchParams'\n\nconst App = () => {\n  const theme = useState('darkblue')\n\n  return (\n    <StrictMode>\n      <ThemeContext.Provider value={theme}>\n        <div>\n          <header>\n            <Link to=\"/\">\n              <h1>Adopt me!</h1>\n            </Link>\n          </header>\n\n          <Switch>\n            <Route path=\"/details/:id\">\n              <Details />\n            </Route>\n\n            <Route path=\"/\">\n              <SearchParams />\n            </Route>\n          </Switch>\n        </div>\n      </ThemeContext.Provider>\n    </StrictMode>\n  )\n}\n\n\nexport default App\n","import express from 'express'\nimport { renderToNodeStream } from 'react-dom/server'\nimport { StaticRouter } from 'react-router-dom'\nimport fs from 'fs'\nimport App from '../src/pages/App'\n\n\nconst PORT = process.env.port || 3000\nconst html = fs.readFileSync('dist/index.html').toString()\nconst parts = html.split('Not rendered')\nconst server = express()\n\n\nserver\n  .use('/dist', express.static('dist'))\n  .use((req, res) => {\n    res.write(parts[0])\n\n    const staticContext = {}\n    const reactMarkup = (\n      <StaticRouter url={req.url} context={staticContext}>\n        <App />\n      </StaticRouter>\n    )\n\n    const stream = renderToNodeStream(reactMarkup)\n    stream.pipe(res, { end: false })\n    stream.on('end', () => {\n      res.status(staticContext || 200)\n      res.write(parts[1])\n      res.end()\n    })\n  })\n\nconsole.log(`Listening on http://localhost:${PORT}`)\nserver.listen(PORT)\n"]}